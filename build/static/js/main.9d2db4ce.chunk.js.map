{"version":3,"sources":["store/actionTypes.js","store/reducer/user.js","store/reducer/chat.js","store/reducer/index.js","store/index.js","store/actionCreator.js","views/register/index.js","views/login/index.js","components/Msg.js","views/chat/index.js","index.js"],"names":["REGISTER_SUCCESS","LOGIN_SUCCESS","ERROR","INIT_DATA","LOGIN_OUT","MSG_RECV","MSG_LIST","initState","redirectTo","nickname","msg","reducer","state","arguments","length","undefined","action","type","Object","objectSpread","data","msgList","concat","toConsumableArray","combineReducers","user","chat","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","store","createStore","socket","io","errMsg","register","password","dispatch","axios","post","then","res","status","code","message","success","error","login","initData","get","obj","getMsgLIst","console","log","recvMsg","on","Register","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","validateToNextPassword","rule","value","callback","form","confirmDirty","validateFields","force","compareToFirstPassword","getFieldValue","handleConfirmBlur","e","target","setState","handleSubmit","preventDefault","validateFieldsAndScroll","err","values","handleRegister","getFieldDecorator","react_default","a","createElement","className","Redirect","to","es_form","onSubmit","Item","label","rules","required","input","validator","onBlur","es_button","htmlType","Component","create","connect","Login","handleLogin","prefix","icon","style","color","placeholder","Link","Msg","mark","info","content","time","create_time","moment","startOf","fromNow","replace","Chat","showDrawer","visible","onClose","handleOut","Cookies","remove","showInput","logoutSubmit","submitSend","handleSend","showEm","switchEmoji","clickEmoji","val","innerHTML","myRef","React","createRef","isLogin","handleInit","handleRecv","handleGetList","handleScroll","_this2","onClick","bind","map","v","i","components_Msg","key","ref","height","overflow","display","split","item","idx","fontSize","marginLeft","onChange","handleChange","onPressEnter","history","push","drawer","title","placement","closable","divider","href","current","scrollIntoView","emit","ReactDOM","render","es","BrowserRouter","Switch","Route","path","component","document","getElementById"],"mappings":"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","file":"static/js/main.9d2db4ce.chunk.js","sourcesContent":["// 注册\nexport const REGISTER_SUCCESS = \"REGISTER_SUCCESS\";\n\n// 登录\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\n\n// 错误\nexport const ERROR = \"ERROR\";\n\n// 初始化获取数据\nexport const INIT_DATA = \"INIT_DATA\";\n\n// 退出登录\nexport const LOGIN_OUT = \"LOGIN_OUT\";\n\n// 接受消息\nexport const MSG_RECV = \"MSG_RECV\";\n\n// 接受消息列表\nexport const MSG_LIST = \"MSG_LIST\";\n","import {\n  REGISTER_SUCCESS,\n  LOGIN_SUCCESS,\n  INIT_DATA,\n  LOGIN_OUT,\n  ERROR\n} from \"../actionTypes\";\n\nconst initState = {\n  redirectTo: \"\", // 路由跳转控制\n  nickname: \"\",\n  msg: \"\"\n};\n\nfunction reducer(state = initState, action) {\n  switch (action.type) {\n    case REGISTER_SUCCESS:\n      return { ...state, ...action.data, redirectTo: \"/login\" };\n    case LOGIN_SUCCESS:\n      return { ...state, ...action.data, redirectTo: \"/chat\" };\n    case INIT_DATA:\n      return { ...state, ...action.data };\n    case LOGIN_OUT:\n      return { ...initState};\n    case ERROR:\n      return { ...state, msg: action.data };\n    default:\n      return state;\n  }\n}\n\nexport default reducer;\n","import { MSG_RECV, MSG_LIST } from \"../actionTypes\";\nconst initState = {\n  msgList: []\n};\n\nfunction reducer(state = initState, action) {\n  switch (action.type) {\n    case MSG_RECV:\n      return { msgList: [...state.msgList, action.data] };\n    case MSG_LIST:\n      return { msgList: [...action.data] };\n    default:\n      return state;\n  }\n}\n\nexport default reducer;\n","import {combineReducers} from 'redux'\nimport user from './user'\nimport chat from './chat'\nexport default combineReducers({user,chat})","import { createStore, applyMiddleware, compose } from \"redux\";\nimport reducer from \"./reducer\";\nimport thunk from \"redux-thunk\";\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n  ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\n  : compose;\n\nconst enhancer = composeEnhancers(applyMiddleware(thunk));\nconst store = createStore(reducer, enhancer);\n\nexport default store;\n","import axios from \"axios\";\nimport {\n  REGISTER_SUCCESS,\n  LOGIN_SUCCESS,\n  INIT_DATA,\n  LOGIN_OUT,\n  MSG_RECV,\n  MSG_LIST,\n  ERROR\n} from \"./actionTypes\";\nimport { message } from \"antd\";\nimport io from \"socket.io-client\";\nconst socket = io(\"http://120.78.167.54:9000\");\n\nfunction getRegisterAction(obj) {\n  return { type: REGISTER_SUCCESS, data: obj };\n}\nfunction getLoginAction(obj) {\n  return { type: LOGIN_SUCCESS, data: obj };\n}\nfunction getLoadAction(obj) {\n  return { type: INIT_DATA, data: obj };\n}\nfunction msgRecv(obj) {\n  return { type: MSG_RECV, data: obj };\n}\nfunction msgList(obj) {\n  return { type: MSG_LIST, data: obj };\n}\nfunction errMsg(msg) {\n  return { type: ERROR, data: msg };\n}\n\n// 注册\nexport const register = data => {\n  const { nickname, password } = data;\n  return dispatch => {\n    axios.post(\"/user/register\", { nickname, password }).then(res => {\n      if (res.status === 200 && res.data.code === 0) {\n        message.success(\"注册成功\");\n        dispatch(getRegisterAction({ nickname }));\n      } else {\n        message.error(res.data.msg);\n        dispatch(errMsg(res.data.msg));\n      }\n    });\n  };\n};\n\n// 登录\nexport const login = data => {\n  const { nickname, password } = data;\n  return dispatch => {\n    axios.post(\"/user/login\", { nickname, password }).then(res => {\n      if (res.status === 200 && res.data.code === 0) {\n        message.success(\"登录成功\");\n        dispatch(getLoginAction({ nickname }));\n      } else {\n        message.error(res.data.msg);\n        dispatch(errMsg(res.data.msg));\n      }\n    });\n  };\n};\n\n// 退出登录\nexport const loginOut = () => {\n  return { type: LOGIN_OUT };\n};\n\n// 初始化获取用户数据\nexport const initData = () => {\n  return dispatch => {\n    axios.get(\"/user/info\").then(res => {\n      if (res.status === 200 && res.data.code === 0) {\n        dispatch(getLoadAction(res.data.data));\n      }\n    });\n  };\n};\n\n// 获取消息列表\nexport const getMsgLIst = () => {\n  return dispatch => {\n    axios.get(\"/user/getmsglist\").then(res => {\n      if (res.status === 200 && res.data.code === 0) {\n        console.log('消息列表:',res.data.data)\n        dispatch(msgList(res.data.data));\n      }\n    });\n  };\n};\n\n// 发送消息\nexport const sendMsg = data => {\n  return dispatch => {\n    socket.emit(\"sendMsg\", data);\n  };\n};\n\n// 接受消息\nexport const recvMsg = () => {\n  return dispatch => {\n    socket.on(\"recvMsg\", data => {\n      dispatch(msgRecv(data));\n    });\n  };\n};\n","import React, { Component } from \"react\";\nimport { Form, Input, Button } from \"antd\";\nimport { connect } from \"react-redux\";\nimport { Redirect } from \"react-router-dom\";\nimport { register } from \"../../store/actionCreator\";\n\nclass Register extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      confirmDirty: false\n    };\n  }\n  validateToNextPassword = (rule, value, callback) => {\n    const form = this.props.form;\n    if (value && this.state.confirmDirty) {\n      form.validateFields([\"confirm\"], { force: true });\n    }\n    callback();\n  };\n\n  compareToFirstPassword = (rule, value, callback) => {\n    const form = this.props.form;\n    if (value && value !== form.getFieldValue(\"password\")) {\n      callback(\"两次输入密码不一致!\");\n    } else {\n      callback();\n    }\n  };\n\n  handleConfirmBlur = e => {\n    const value = e.target.value;\n    this.setState({ confirmDirty: this.state.confirmDirty || !!value });\n  };\n\n  handleSubmit = e => {\n    console.log(\"点击按钮\");\n    e.preventDefault();\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      if (!err) {\n        //console.log(\"Received values of form: \", values);\n        this.props.handleRegister(values);\n      }\n    });\n  };\n  render() {\n    const { getFieldDecorator } = this.props.form;\n    return (\n      <div className=\"register-form-wrapper\">\n        {this.props.redirectTo ? <Redirect to={this.props.redirectTo} /> : null}\n        <Form onSubmit={this.handleSubmit}>\n          <Form.Item label=\"用户名\">\n            {getFieldDecorator(\"nickname\", {\n              rules: [\n                {\n                  required: true,\n                  message: \"请输入用户名!\"\n                }\n              ]\n            })(<Input type=\"text\" />)}\n          </Form.Item>\n          <Form.Item label=\"密码\">\n            {getFieldDecorator(\"password\", {\n              rules: [\n                {\n                  required: true,\n                  message: \"请输入密码!\"\n                },\n                {\n                  validator: this.validateToNextPassword\n                }\n              ]\n            })(<Input type=\"password\" />)}\n          </Form.Item>\n          <Form.Item label=\"确认密码\">\n            {getFieldDecorator(\"confirm\", {\n              rules: [\n                {\n                  required: true,\n                  message: \"请确认密码!\"\n                },\n                {\n                  validator: this.compareToFirstPassword\n                }\n              ]\n            })(<Input type=\"password\" onBlur={this.handleConfirmBlur} />)}\n          </Form.Item>\n          <Form.Item>\n            <Button type=\"primary\" htmlType=\"submit\">\n              注册\n            </Button>\n          </Form.Item>\n        </Form>\n      </div>\n    );\n  }\n}\nRegister = Form.create({})(Register);\n\nconst mapStateToProps = state => {\n  return {\n    redirectTo: state.user.redirectTo\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    handleRegister(values) {\n      const { nickname, password } = values;\n      dispatch(register({ nickname, password }));\n    }\n  };\n};\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Register);\n","import React, { Component } from \"react\";\nimport { Form, Icon, Input, Button } from \"antd\";\nimport { connect } from \"react-redux\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport { login } from \"../../store/actionCreator\";\n\nclass Login extends Component {\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        this.props.handleLogin(values);\n      }\n    });\n  };\n  render() {\n    const { getFieldDecorator } = this.props.form;\n    return (\n      <div className=\"login-form-wrapper\">\n        {this.props.redirectTo ? <Redirect to={this.props.redirectTo} /> : null}\n        <Form onSubmit={this.handleSubmit}>\n          <Form.Item>\n            {getFieldDecorator(\"nickname\", {\n              rules: [\n                { required: true, message: \"Please input your username!\" }\n              ]\n            })(\n              <Input\n                prefix={\n                  <Icon type=\"user\" style={{ color: \"rgba(0,0,0,.25)\" }} />\n                }\n                placeholder=\"用户名\"\n              />\n            )}\n          </Form.Item>\n          <Form.Item>\n            {getFieldDecorator(\"password\", {\n              rules: [\n                { required: true, message: \"Please input your Password!\" }\n              ]\n            })(\n              <Input\n                prefix={\n                  <Icon type=\"lock\" style={{ color: \"rgba(0,0,0,.25)\" }} />\n                }\n                type=\"password\"\n                placeholder=\"密码\"\n              />\n            )}\n          </Form.Item>\n          <Form.Item>\n            <Button\n              type=\"primary\"\n              htmlType=\"submit\"\n              className=\"login-form-button\"\n            >\n              登录\n            </Button>\n            或 <Link to=\"/register\">注册</Link>\n          </Form.Item>\n        </Form>\n      </div>\n    );\n  }\n}\n\nLogin = Form.create({})(Login);\n\nconst mapStateToProps = state => {\n  return {\n    redirectTo: state.user.redirectTo\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    handleLogin(values) {\n      const { nickname, password } = values;\n      dispatch(login({ nickname, password }));\n    }\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Login);\n","import React, { Component } from \"react\";\nimport moment from 'moment'\nimport \"./style.css\";\nconst formatTime = time => moment(time).startOf('minute').fromNow()\n.replace(/hours?/, '小时')\n.replace('ago', '前').replace(/days?/, '天')\n.replace(/minutes?/, '分钟')\n.replace(/\\ban?/, '1')\n.replace(/months?/, '个月')\n.replace(/\\byears?/, '年')\n.replace(/\\s/g, '')\n.replace('fewseconds', '分钟')\nclass Msg extends Component {\n  render() {\n    return (\n      <div\n        className={this.props.mark === \"self\" ? \"msg-item self\" : \"msg-item\"}\n      >\n        <span className=\"name\">{this.props.info.user}</span>\n        <span className=\"msg\">{this.props.info.content}</span>\n        <span className=\"time\">\n          {formatTime(this.props.info.create_time)}\n        </span>\n      </div>\n    );\n  }\n}\n\nexport default Msg;\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Input, Button, message, Icon, Drawer, Divider } from \"antd\";\nimport {\n  initData,\n  sendMsg,\n  recvMsg,\n  getMsgLIst,\n  loginOut\n} from \"../../store/actionCreator\";\nimport Msg from \"../../components/Msg\";\nimport Cookies from \"js-cookie\";\nclass Chat extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      content: \"\",\n      visible: false,\n      showInput: true,\n      showEm: false\n    };\n    this.myRef = React.createRef();\n    this.isLogin = Cookies.get(\"userid\") ? true : false;\n  }\n  componentDidMount() {\n    this.props.handleInit(); // 获取已登录用户信息\n    if (!this.props.msgList.length) {\n      this.props.handleRecv(); // 获取用户消息\n      this.props.handleGetList(); // 获取消息列表\n    }\n    this.setState({\n      showInput: this.isLogin ? true : false\n    });\n  }\n\n  componentDidUpdate() {\n    this.handleScroll();\n  }\n\n  // 打开抽屉\n  showDrawer = () => {\n    this.setState({\n      visible: true\n    });\n  };\n\n  // 关闭抽屉\n  onClose = () => {\n    this.setState({\n      visible: false\n    });\n  };\n\n  // 点击退出登录\n  handleOut = () => {\n    Cookies.remove(\"userid\");\n    this.setState({\n      showInput: false\n    });\n    this.props.logoutSubmit();\n    message.success(\"你已退出登录！\");\n  };\n\n  // 发送消息\n  submitSend = () => {\n    this.props.handleSend(this.props.nickname, this.state.content);\n    this.setState({ content: \"\", showEm: false });\n  };\n\n  // 控制表情显示隐藏\n  switchEmoji = () => {\n    this.setState({\n      showEm: !this.state.showEm\n    });\n  };\n\n  // 点击表情\n  clickEmoji = e => {\n    const val = this.state.content + e.target.innerHTML;\n    this.setState({\n      content: val\n    });\n  };\n\n  render() {\n    const emojis =\n      \"😃 😃 😀 😁 😂 🤣 😃 😄 😅 😆 😉 😊 😋 😎 😍 😘 😗 😙 😚 🙂 🤗 🤩 🤔 🤨 😐 😑 😶 🙄 😏 😣 😥 😮 🤐 😯 😪 😫 😴 😌 😛 😜 😝 🤤 😒 😓 😔 😕 🙃 🤑 😲 🙁 😖 😞 😟 😤 😢 😭 😦 😧 😨 😩 🤯 😬 😰 😱 😳 🤪 😵 😡 😠 🤬 😷 🤒 🤕 🤢 🤮 🤧 😇 🤠 🤡 🤥 🤫 🤭 🧐 🤓 😈 💪 👈 👉 👆 🖕 👇 🤞 🖖 🤘 🤙 🖐 👌 👍 👎 ✊ 👊 🤛 🤜 🤚 👋 \";\n    return (\n      <div>\n        <div className=\"chat-box\">\n          <div className=\"header\">\n            <span>瓶子的聊天室</span>\n            <Icon onClick={this.showDrawer.bind(this)} type=\"setting\" />\n          </div>\n          <div\n            className=\"content\"\n            onClick={() => this.setState({ showEm: false })}\n          >\n            {this.props.msgList.map((v, i) => {\n              return v.user === this.props.nickname ? (\n                <Msg key={i} mark=\"self\" info={v} />\n              ) : (\n                <Msg key={i} mark=\"other\" info={v} />\n              );\n            })}\n            <div\n              className=\"end\"\n              ref={this.myRef}\n              style={{ height: 0, overflow: \"hidden\" }}\n            />\n          </div>\n          <div className=\"footer\">\n            {this.state.showInput ? (\n              <div className=\"input\">\n                <div\n                  className=\"emoji-box\"\n                  style={{ display: this.state.showEm ? \"block\" : \"none\" }}\n                >\n                  <div className=\"emojis\">\n                    {emojis.split(\" \").map((item, idx) => (\n                      <span onClick={this.clickEmoji} key={idx}>\n                        {item}\n                      </span>\n                    ))}\n                  </div>\n                </div>\n\n                <Icon\n                  type=\"smile\"\n                  style={{ fontSize: \"20px\", marginLeft: \"5px\" }}\n                  onClick={this.switchEmoji}\n                />\n                <Input\n                  placeholder=\"来吐槽吧～\"\n                  value={this.state.content}\n                  onChange={v => this.handleChange(v)}\n                  onClick={this.handleScroll.bind(this)}\n                  onPressEnter={this.submitSend}\n                />\n                <Button type=\"primary\" onClick={this.submitSend}>\n                  发送\n                </Button>\n              </div>\n            ) : (\n              <div className=\"go-login\">\n                <span onClick={() => this.props.history.push(\"/login\")}>\n                  登录\n                </span>\n                才可以聊天室\n              </div>\n            )}\n          </div>\n        </div>\n        <Drawer\n          title=\"\"\n          placement=\"right\"\n          closable={false}\n          onClose={this.onClose}\n          visible={this.state.visible}\n        >\n          <div>\n            <span>当前用户：</span>\n            <span>{this.props.nickname ? this.props.nickname : \"未登录\"}</span>\n          </div>\n          <Divider />\n          <div className=\"drawer-row\">\n            <a href=\"https://github.com/wungjyan/react-chat-room\">源码地址</a>\n          </div>\n          {this.props.nickname ? (\n            <div className=\"drawer-row\" onClick={this.handleOut}>\n              退出登录\n            </div>\n          ) : null}\n        </Drawer>\n      </div>\n    );\n  }\n  handleChange(v) {\n    this.setState({\n      content: v.target.value\n    });\n  }\n  handleScroll() {\n    this.myRef.current.scrollIntoView();\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    nickname: state.user.nickname,\n    msgList: state.chat.msgList\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    handleInit() {\n      console.log(\"执行init\");\n      dispatch(initData());\n    },\n    handleSend(user, content) {\n      console.log(\"执行Send\");\n      if (!content) {\n        message.error(\"不能发空消息！\");\n        return;\n      }\n      dispatch(sendMsg({ user, content }));\n    },\n    handleRecv() {\n      console.log(\"执行Recv\");\n      dispatch(recvMsg());\n    },\n    handleGetList() {\n      console.log(\"执行GETLIST\");\n      dispatch(getMsgLIst());\n    },\n    logoutSubmit() {\n      dispatch(loginOut());\n    }\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Chat);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\n\nimport Register from \"./views/register\";\nimport Login from \"./views/login\";\nimport Chat from \"./views/chat\";\nimport \"./main.css\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <div className=\"main\">\n      <BrowserRouter>\n        <Switch>\n          <Route path=\"/register\" component={Register} />\n          <Route path=\"/login\" component={Login} />\n          <Route path=\"/chat\" component={Chat} />\n          <Redirect to=\"/chat\" />\n        </Switch>\n      </BrowserRouter>\n    </div>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}